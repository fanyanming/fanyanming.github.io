<!DOCTYPE html>
<html >
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Yanming Fan" />



<meta name="description" content="å…ˆæ”¾ä¸€å¼ å›¾:
å’Œ2å¥å®˜æ–¹æ–‡æ¡£ç‰‡æ®µcopy â€”- The copy returned is immutable if the consideration â€œimmutable vs. mutableâ€ applies to the receiving object; otherwise the exact nature of the copy is determined by the class.m">
<meta property="og:type" content="article">
<meta property="og:title" content="æ·±æ‹·è´å’Œæµ…æ‹·è´,å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—">
<meta property="og:url" content="http://yoursite.com/2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/index.html">
<meta property="og:site_name" content="Yanmingâ€™s blog">
<meta property="og:description" content="å…ˆæ”¾ä¸€å¼ å›¾:
å’Œ2å¥å®˜æ–¹æ–‡æ¡£ç‰‡æ®µcopy â€”- The copy returned is immutable if the consideration â€œimmutable vs. mutableâ€ applies to the receiving object; otherwise the exact nature of the copy is determined by the class.m">
<meta property="og:image" content="http://yoursite.com/assets/images/2016/copyAbout.png">
<meta property="og:updated_time" content="2016-06-23T07:36:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ·±æ‹·è´å’Œæµ…æ‹·è´,å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—">
<meta name="twitter:description" content="å…ˆæ”¾ä¸€å¼ å›¾:
å’Œ2å¥å®˜æ–¹æ–‡æ¡£ç‰‡æ®µcopy â€”- The copy returned is immutable if the consideration â€œimmutable vs. mutableâ€ applies to the receiving object; otherwise the exact nature of the copy is determined by the class.m">
<meta name="twitter:image" content="http://yoursite.com/assets/images/2016/copyAbout.png">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternative" href="/atom.xml" title="Yanmingâ€™s blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>æ·±æ‹·è´å’Œæµ…æ‹·è´,å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾— | Yanmingâ€™s blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        open_in_new: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Yanming Fan</a></h1>
        </hgroup>

        
        <p class="header-subtitle">Record and share.</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>èœå•</li>
                        <li>æ ‡ç­¾</li>
                        
                        <li>å‹æƒ…é“¾æ¥</li>
                        
                        
                        <li>å…³äºæˆ‘</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">ä¸»é¡µ</a></li>
                        
                            <li><a href="/archives/">æ‰€æœ‰æ–‡ç« </a></li>
                        
                            <li><a href="/about/">å…³äºæˆ‘</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:developerfan@outlook.com" title="Email"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">ç²¾è‡´çš„å¼€å‘è€…</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="å›åˆ°ä¸»é¡µ">Yanming Fan</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="å›åˆ°ä¸»é¡µ">Yanming Fan</a></h1>
            </hgroup>
            
            <p class="header-subtitle">Record and share.</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">ä¸»é¡µ</a></li>
                
                    <li><a href="/archives/">æ‰€æœ‰æ–‡ç« </a></li>
                
                    <li><a href="/about/">å…³äºæˆ‘</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:developerfan@outlook.com" title="Email"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="æ ‡ç­¾" friends="å‹æƒ…é“¾æ¥" about="å…³äºæˆ‘"/>
</nav>
      <div class="body-wrap"><article id="post-æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/" class="article-date">
      <time datetime="2016-06-22T06:05:47.000Z" itemprop="datePublished">2016-06-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      æ·±æ‹·è´å’Œæµ…æ‹·è´,å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="å…ˆæ”¾ä¸€å¼ å›¾"><a href="#å…ˆæ”¾ä¸€å¼ å›¾" class="headerlink" title="å…ˆæ”¾ä¸€å¼ å›¾:"></a>å…ˆæ”¾ä¸€å¼ å›¾:</h3><p><img src="/assets/images/2016/copyAbout.png" alt="å…³ç³»å›¾"></p>
<h3 id="å’Œ2å¥å®˜æ–¹æ–‡æ¡£ç‰‡æ®µ"><a href="#å’Œ2å¥å®˜æ–¹æ–‡æ¡£ç‰‡æ®µ" class="headerlink" title="å’Œ2å¥å®˜æ–¹æ–‡æ¡£ç‰‡æ®µ"></a>å’Œ2å¥å®˜æ–¹æ–‡æ¡£ç‰‡æ®µ</h3><p><code>copy â€”- The copy returned is immutable if the consideration â€œimmutable vs. mutableâ€ applies to the receiving object; otherwise the exact nature of the copy is determined by the class.</code><br><code>mutableCopy â€”â€” The copy returned is mutable whether the original is mutable or not.</code></p>
<h3 id="å› ä¸ºè¿™ä¸¤ä¸ªæ¦‚å¿µå®åœ¨æ˜¯æ˜“äºæ··æ·†-æ‰€ä»¥ä¸€ä¸‹è¯´çš„éƒ½æ˜¯è‚¯å®šçš„-é”™è¯¯çš„ä¸è¯´"><a href="#å› ä¸ºè¿™ä¸¤ä¸ªæ¦‚å¿µå®åœ¨æ˜¯æ˜“äºæ··æ·†-æ‰€ä»¥ä¸€ä¸‹è¯´çš„éƒ½æ˜¯è‚¯å®šçš„-é”™è¯¯çš„ä¸è¯´" class="headerlink" title="å› ä¸ºè¿™ä¸¤ä¸ªæ¦‚å¿µå®åœ¨æ˜¯æ˜“äºæ··æ·†,æ‰€ä»¥ä¸€ä¸‹è¯´çš„éƒ½æ˜¯è‚¯å®šçš„,é”™è¯¯çš„ä¸è¯´"></a>å› ä¸ºè¿™ä¸¤ä¸ªæ¦‚å¿µå®åœ¨æ˜¯æ˜“äºæ··æ·†,æ‰€ä»¥ä¸€ä¸‹è¯´çš„éƒ½æ˜¯è‚¯å®šçš„,é”™è¯¯çš„ä¸è¯´</h3><ol>
<li>å…ˆæŠŠä¸Šé¢ä¸¤å¥è½¬åŒ–(ç¿»è¯‘ğŸ˜„),ä½¿ç”¨copyæ–¹æ³•åè¿”å›çš„å¯¹è±¡å’Œè¢«æ‹·è´çš„å¯¹è±¡çš„å¯å˜æ€§ä¸€è‡´,å½“ç„¶è¢«æ‹·è´çš„å¯¹è±¡æ²¡æœ‰ç›¸å…³å±æ€§ä¾ç„¶ä¸€è‡´;ä½¿ç”¨mutableCopyæ–¹æ³•è¿”å›çš„å¯¹è±¡,ä¸ºå¯å˜,æ— è®ºè¢«æ‹·è´çš„å¯¹è±¡æ˜¯å¦å¯å˜.</li>
<li>æ·±æ‹·è´å’Œæµ…æ‹·è´,ä¸å¯å˜å’Œä¸å¯å˜æ²¡æœ‰å¿…ç„¶å…³ç³»</li>
<li>ç³»ç»Ÿçš„ç±»å¤§éƒ¨åˆ†éƒ½æ˜¯æ‰§è¡Œçš„æµ…æ‹·è´,æ— è®ºæ˜¯ä½¿ç”¨copyæ–¹æ³•è¿˜æ˜¯mutableCopyæ–¹æ³•,æ‰€ä»¥è¯´ä½¿ç”¨mutableCopyçš„ä¸ä¸€å®šæ˜¯æ·±æ‹·è´</li>
<li>ç³»ç»Ÿçš„ä¸€äº›ç±»<code>NSDictionary</code>,<code>NSArray</code>,<code>NSSet</code>ç­‰,é»˜è®¤éƒ½æ˜¯æµ…æ‹·è´,æ— è®ºä½ æ˜¯ç”¨å“ªç§çš„æ‹·è´æ–¹æ³•</li>
<li>æ—¢ç„¶æ˜¯æ‹·è´,æ— è®ºæ˜¯å“ªç§æ–¹å¼,copyæˆ–è€…mutableCopyè·å–çš„å¯¹è±¡éƒ½æ˜¯ä¸åŒçš„,ä½†æ˜¯æ·±æ‹·è´çš„å¯¹è±¡åˆ™æ˜¯å®Œå…¨ç‹¬ç«‹(<em>è¿™é‡Œå¼ºè°ƒä¸€ç‚¹çš„å°±æ˜¯å¦‚æœä¸€ä¸ªç±»çš„å­ç±»å±äºç³»ç»Ÿçš„ä¸€äº›ç±»çš„,è¿™äº›å­ç±»ä¹Ÿåªä¼šè¢«æµ…æ‹·è´å‡ºæ¥,è€Œä¸ä¼šæ˜¯å…¨æ–°çš„å­ç±»</em>),å¯ä»¥çœ‹ç¬¬ä¸€å¼ å›¾,å¾ˆæ¸…æ™°,ä¸¾ä¸ªä¾‹å­:<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *a1 = <span class="string">@"hello"</span>;</span><br><span class="line"><span class="built_in">NSString</span> *a2 = <span class="string">@"world"</span>;</span><br><span class="line"></span><br><span class="line">CrazyBee *bee1 = [[CrazyBee alloc] init];<span class="comment">// è‡ªå»ºç±»,éœ€è¦æ‰‹åŠ¨å®ç°copyWithZone,æˆ–è€…mutableCopyWithZoneæ–¹æ³•</span></span><br><span class="line">CrazyBee *bee2 = [[CrazyBee alloc] init];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@:%p"</span>,bee1,bee1);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@:%p"</span>,bee2,bee2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸå§‹å¯¹è±¡</span></span><br><span class="line"><span class="built_in">NSArray</span> *originalArr = @[bee1,bee2];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"-------åŸå§‹å¯¹è±¡---------\noriginalArr:%p"</span>,originalArr);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"originalArr[0]:%p"</span>,originalArr[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ…æ‹·è´</span></span><br><span class="line"><span class="keyword">id</span> copiedArr = [originalArr <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"------æµ…æ‹·è´------\ncopiedArr:%p"</span>,&amp;copiedArr);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"copiedArr[0]:%p"</span>,copiedArr[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ªæ·±æ‹·è´</span></span><br><span class="line"><span class="keyword">id</span> fakeCopiedArr = [originalArr mutableCopy];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"----ä¼ªæ·±æ‹·è´-----\nfakeCopiedArr:%p"</span>,fakeCopiedArr);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"fakeCopiedArr[0]:%p"</span>,fakeCopiedArr[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·±æ‹·è´</span></span><br><span class="line"><span class="keyword">id</span> deepCopiedArr = [[<span class="built_in">NSMutableArray</span> alloc] initWithArray:originalArr copyItems:<span class="literal">YES</span>];<span class="comment">// æ­¤æ–¹æ³•ä¼šè®©å­å¯¹è±¡ä¹Ÿè°ƒç”¨copyWithZone/mutableCopyWithZoneæ–¹æ³•,è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè‡ªå»ºç±»è¦æ‰‹åŠ¨å®ç°æ‹·è´çš„æ–¹æ³•,ä¸ç„¶ä¼šå´©æºƒ</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"----æ·±æ‹·è´-----\ndeepCopiedArr:%p"</span>,&amp;deepCopiedArr);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"deepCopiedArr[0]:%p"</span>,deepCopiedArr[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;CrazyBee: 0x7ff27ad41400&gt;:0x7ff27ad41400//åœ°å€1</span><br><span class="line">	&lt;CrazyBee: 0x7ff27ad3c820&gt;:0x7ff27ad3c820</span><br><span class="line">	-------åŸå§‹å¯¹è±¡---------</span><br><span class="line">originalArr:0x7ff27ad01300</span><br><span class="line">originalArr[0]:0x7ff27ad41400//åœ°å€1</span><br><span class="line"> ------æµ…æ‹·è´------</span><br><span class="line">copiedArr:0x7fff5bff8a28</span><br><span class="line">	copiedArr[0]:0x7ff27ad41400//åœ°å€1</span><br><span class="line">	----ä¼ªæ·±æ‹·è´-----</span><br><span class="line">fakeCopiedArr:0x7ff27af1aeb0</span><br><span class="line">fakeCopiedArr[0]:0x7ff27ad41400//åœ°å€1</span><br><span class="line"> ----æ·±æ‹·è´-----</span><br><span class="line">deepCopiedArr:0x7fff5bff8a18</span><br><span class="line">	deepCopiedArr[0]:0x7ff27af17e20// æ–°åœ°å€(å¦‚æœä¸Šè¿°çš„å­ç±»æ˜¯a1,a2,è¿™é‡Œä¹Ÿæ˜¯åœ°å€1,ä¹Ÿå°è¯äº†ç³»ç»Ÿé»˜è®¤ä½¿ç”¨æµ…æ‹·è´çš„)</span><br></pre></td></tr></table></figure>
<h3 id="æœ€åæ”¾ä¸Šä¸€æ®µå®˜æ–¹æ–‡æ¡£-é™„å¸¦ç®€æ˜“ç¿»è¯‘-æˆ‘æ„Ÿè§‰è¯´çš„å·²è¿‘å¾ˆæ¸…æ¥šäº†"><a href="#æœ€åæ”¾ä¸Šä¸€æ®µå®˜æ–¹æ–‡æ¡£-é™„å¸¦ç®€æ˜“ç¿»è¯‘-æˆ‘æ„Ÿè§‰è¯´çš„å·²è¿‘å¾ˆæ¸…æ¥šäº†" class="headerlink" title="æœ€åæ”¾ä¸Šä¸€æ®µå®˜æ–¹æ–‡æ¡£(é™„å¸¦ç®€æ˜“ç¿»è¯‘),æˆ‘æ„Ÿè§‰è¯´çš„å·²è¿‘å¾ˆæ¸…æ¥šäº†"></a>æœ€åæ”¾ä¸Šä¸€æ®µå®˜æ–¹æ–‡æ¡£(é™„å¸¦ç®€æ˜“ç¿»è¯‘),æˆ‘æ„Ÿè§‰è¯´çš„å·²è¿‘å¾ˆæ¸…æ¥šäº†</h3><blockquote>
<p><strong>Copy Functions</strong></p>
<p>In general, a standard copy operation, which might also be called simple assignment, occurs when you use the = operator to assign the value of one variable to another. The expression myInt2 = myInt1, for example, causes the integer contents of myInt1 to be copied from the memory used by myInt1 into the memory used by myInt2. Following the copy operation, two separate areas of memory contain the same value. However, if you attempt to copy a Core Foundation object in this way, be aware that you will not duplicate the object itself, only the reference to the object.(åŸºæœ¬ç±»å‹æ•°æ®çš„èµ‹å€¼(=),ç›´æ¥æ‹·è´æ•°æ®,å®ä¾‹å¯¹è±¡,åªä¼šæ‹·è´æŒ‡é’ˆ,æŒ‡å‘è¢«æ‹·è´çš„å¯¹è±¡,ä¸ä¼šå†åˆ›å»ºé¢å¤–çš„ç©ºé—´(å­˜æ”¾æŒ‡é’ˆçš„ç©ºé—´è¿˜æ˜¯è¦æœ‰çš„))</p>
<p>For example, someone new to Core Foundation might think that to make a copy of a CFString object she would use the expression myCFString2 = myCFString1. Again, this expression does not actually copy the string data. Because both myCFString1 and myCFString2 must have the CFStringRef type, this expression only copies the reference to the object. Following the copy operation, you have two copies of the reference to the CFString. This type of copy is very fast because only the reference is duplicated, but it is important to remember that copying a mutable object in this way is dangerous. As with programs that use global variables, if one part of your application changes an object using a copy of the reference, there is no way for other parts of the program which have copies of that reference to know that the data has changed.</p>
<p>If you want to duplicate an object, you must use one of the functions provided by Core Foundation specifically for this purpose. Continuing with the CFString example, you would use CFStringCreateCopy to create an entirely new CFString object containing the same data as the original. Core Foundation types which have â€œCreateCopyâ€ functions also provide the variant â€œCreateMutableCopyâ€ which returns a copy of an object that can be modified.</p>
<p><strong>Shallow Copy</strong></p>
<p>Copying compound objects, objects such as collection objects that can contain other objects, must also be done with care. As you would expect, using the = operator to perform a copy on these objects results in a duplication of the object reference. In contrast to simple objects like CFString and CFData, the â€œCreateCopyâ€ functions provided for compound objects such as CFArray and CFSet actually perform a shallow copy. In the case of these objects, a shallow copy means that a new collection object is created, but the contents of the original collection are not duplicatedâ€”only the object references are copied to the new container. This type of copy is useful if, for example, you have an array thatâ€™s immutable and you want to reorder it. In this case, you donâ€™t want to duplicate all of the contained objects because thereâ€™s no need to change themâ€”and why use up that extra memory? You just want the set of included objects to be changed. The same risks apply here as with copying object references with simple types.(å¯¹äºå¤æ‚çš„å¯¹è±¡,å¯¹è±¡ä¸­åˆåŒ…å«å¯¹è±¡çš„,æµ…å¤åˆ¶åˆ™åªæ‹·è´å®¹å™¨å¯¹è±¡,è€Œæ‹·è´å‡ºæ¥çš„å¯¹è±¡å†…çš„å¯¹è±¡åˆ™ä¾ç„¶æŒ‡å‘è¢«æ‹·è´çš„å¯¹è±¡å†…çš„å­å¯¹è±¡,è€Œä¸”è¿™ä¹Ÿæ˜¯ç³»ç»Ÿå»ºè®®çš„æ‹·è´æ–¹æ³•)</p>
<p><strong>Deep Copy</strong></p>
<p>When you want to create an entirely new compound object, you must perform a deep copy. A deep copy duplicates the compound object as well as the contents of all of its contained objects. The current release of Core Foundation includes a function that performs deep copying of a property list (see CFPropertyListCreateDeepCopy). If you want to create deep copies of other structures, you could perform the deep copy yourself by recursively descending into the compound object and copying all of its contents one by one. Take care in implementing this functionality as compound objects can be recursiveâ€”they may directly or indirectly contain a reference to themselvesâ€”which can cause a recursive loop.(åŒæ ·é’ˆå¯¹è¿™ç±»å¤æ‚çš„å¯¹è±¡æ¥è¯´,æ·±å¤åˆ¶,åˆ™æ˜¯å°†å­å¯¹è±¡ä¹Ÿå…¨éƒ¨å¤åˆ¶)</p>
</blockquote>
<p>å‚è€ƒ:å®˜ç½‘æ–‡æ¡£,<a href="http://xiongzenghuidegithub.github.io/blog/2016/03/26/qian-kao-bei-yu-shen-kao-bei/" target="_blank" rel="external">æµ…æ‹·è´ä¸æ·±æ‹·è´</a></p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>æœ¬æ–‡æ ‡é¢˜:</span><a href="/2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/">æ·±æ‹·è´å’Œæµ…æ‹·è´,å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—</a></p>
        <p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="å›åˆ°ä¸»é¡µ">Yanming Fan</a></p>
        <p><span>å‘å¸ƒæ—¶é—´:</span>2016-06-22, 14:05:47</p>
        <p><span>æœ€åæ›´æ–°:</span>2016-06-23, 15:36:40</p>
        <p>
            <span>åŸå§‹é“¾æ¥:</span><a class="post-url" href="/2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/" title="æ·±æ‹·è´å’Œæµ…æ‹·è´,å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—">http://yoursite.com/2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/</a>
            <span class="copy-path" data-clipboard-text="åŸæ–‡: http://yoursite.com/2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/ã€€ã€€ä½œè€…: Yanming Fan" title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"ç½²å-éå•†ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0"</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2016/06/24/blockä¸€äº›ç®€å•çš„ç”¨æ³•æ€»ç»“/">
                    blockä¸€äº›ç®€å•çš„ç”¨æ³•æ€»ç»“
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2016/06/21/hexo-github-æ­å»ºä¸ªäººåšå®¢ç®€è¿°/">
                    hexo + github æ­å»ºä¸ªäººåšå®¢ç®€è¿°
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#å…ˆæ”¾ä¸€å¼ å›¾"><span class="toc-number">1.</span> <span class="toc-text">å…ˆæ”¾ä¸€å¼ å›¾:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å’Œ2å¥å®˜æ–¹æ–‡æ¡£ç‰‡æ®µ"><span class="toc-number">2.</span> <span class="toc-text">å’Œ2å¥å®˜æ–¹æ–‡æ¡£ç‰‡æ®µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å› ä¸ºè¿™ä¸¤ä¸ªæ¦‚å¿µå®åœ¨æ˜¯æ˜“äºæ··æ·†-æ‰€ä»¥ä¸€ä¸‹è¯´çš„éƒ½æ˜¯è‚¯å®šçš„-é”™è¯¯çš„ä¸è¯´"><span class="toc-number">3.</span> <span class="toc-text">å› ä¸ºè¿™ä¸¤ä¸ªæ¦‚å¿µå®åœ¨æ˜¯æ˜“äºæ··æ·†,æ‰€ä»¥ä¸€ä¸‹è¯´çš„éƒ½æ˜¯è‚¯å®šçš„,é”™è¯¯çš„ä¸è¯´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¿è¡Œç»“æœ"><span class="toc-number">4.</span> <span class="toc-text">è¿è¡Œç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æœ€åæ”¾ä¸Šä¸€æ®µå®˜æ–¹æ–‡æ¡£-é™„å¸¦ç®€æ˜“ç¿»è¯‘-æˆ‘æ„Ÿè§‰è¯´çš„å·²è¿‘å¾ˆæ¸…æ¥šäº†"><span class="toc-number">5.</span> <span class="toc-text">æœ€åæ”¾ä¸Šä¸€æ®µå®˜æ–¹æ–‡æ¡£(é™„å¸¦ç®€æ˜“ç¿»è¯‘),æˆ‘æ„Ÿè§‰è¯´çš„å·²è¿‘å¾ˆæ¸…æ¥šäº†</span></a></li></ol>
</div>
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
</style>

<input type="button" id="tocButton" value="éšè—ç›®å½•"  title="ç‚¹å‡»æŒ‰é’®éšè—æˆ–è€…æ˜¾ç¤ºæ–‡ç« ç›®å½•">

<script>
    yiliaConfig.toc = ["éšè—ç›®å½•", "æ˜¾ç¤ºç›®å½•", !!"false"];
</script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="åˆ†äº«åˆ°æ¨ç‰¹"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="åˆ†äº«ç»™ QQ å¥½å‹"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="å¤åˆ¶ç½‘å€"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="é€šè¿‡é‚®ä»¶åˆ†äº«"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="ç”Ÿæˆæ–‡ç« äºŒç»´ç "></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"æ·±æ‹·è´å’Œæµ…æ‹·è´,å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—ã€€| Yanmingâ€™s blogã€€","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
        <section id="comments">
    <style> aside.comment-bar { margin: auto 30px; }</style>
    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function(){
            this.page.url = 'http://yoursite.com/2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/';
            this.page.identifier = '2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/';
        };
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = '//null.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
    </script>
    
    <aside class="comment-bar">
        <a href="javascript:void(0);">
            <i class="fa fa-commenting-o animated infinite pulse"></i>
            <i class="fa fa-spinner fa-pulse"></i>
            <span class="count-comment"></span>
        </a>
    </aside>
    <script>
        var $commentBar = $("#comments aside.comment-bar");
        var load$hide = function(){
            $commentBar.find("a > i").toggle();
            loadComment();
            $commentBar.fadeOut(800);
        }
        $commentBar.click(function(){
            load$hide();
        })
        $commentBar.children("a").hover(function(){
            load$hide();
        })
        if (window.location.hash === "#comments") {
            load$hide();
        }
    </script>

</section>


    // Add comment count
    <script id="dsq-count-scr" src="//null.disqus.com/count.js" async></script>
    <span class="disqus-comment-count" data-disqus-identifier="2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/"></span>
    <span class="disqus-comment-count" data-disqus-url="http://yoursite.com/2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/"></span>
    <script>
        $(".disqus-comment-count").hide();
        var $disqusCount = $(".disqus-comment-count");
        $disqusCount.bind("DOMNodeInserted", function(e) {
            $(".count-comment").text(
                $(this).text().replace(/[^0-9]/ig,"")
            )
            DISQUSWIDGETS.getCount({reset: true});
        })
    </script>

    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/06/24/blockä¸€äº›ç®€å•çš„ç”¨æ³•æ€»ç»“/" title="ä¸Šä¸€ç¯‡: blockä¸€äº›ç®€å•çš„ç”¨æ³•æ€»ç»“">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="æ–‡ç« åˆ—è¡¨"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2016/06/21/hexo-github-æ­å»ºä¸ªäººåšå®¢ç®€è¿°/" title="ä¸‹ä¸€ç¯‡: hexo + github æ­å»ºä¸ªäººåšå®¢ç®€è¿°">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/iOS-é‚£äº›é›¶ç¢ä½†æœ‰ç”¨çš„ä¸œè¥¿/">iOS é‚£äº›é›¶ç¢ä½†æœ‰ç”¨çš„ä¸œè¥¿</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/24/blockä¸€äº›ç®€å•çš„ç”¨æ³•æ€»ç»“/">blockä¸€äº›ç®€å•çš„ç”¨æ³•æ€»ç»“</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/22/æ·±æ‹·è´å’Œæµ…æ‹·è´-å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—/">æ·±æ‹·è´å’Œæµ…æ‹·è´,å¯å˜å’Œä¸å¯å˜çš„ä¸€ç‚¹ç‚¹å¿ƒå¾—</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/21/hexo-github-æ­å»ºä¸ªäººåšå®¢ç®€è¿°/">hexo + github æ­å»ºä¸ªäººåšå®¢ç®€è¿°</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/21/hello-world/">Hello World</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2014-2016 Yanming Fan
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="ç®€è€Œä¸å‡ Hexo åŒæ åšå®¢ä¸»é¢˜  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >æœ¬ç«™åˆ°è®¿æ•°: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">æœ¬é¡µé˜…è¯»é‡: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#" title="è¿”å›é¡¶éƒ¨"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="æŸ¥çœ‹è¯„è®º"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="è½¬åˆ°åº•éƒ¨"><i class="fa fa-arrow-down"></i></a>
</div>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>